@using ChangeEventArgs = Microsoft.AspNetCore.Components.ChangeEventArgs
<input type="time"
       class="@Class"
       id="@Id"
       step="@Step"
       value="@ValueString"
       @onchange="OnChange" />

@code {
    [Parameter] public TimeSpan Value { get; set; }
    [Parameter] public EventCallback<TimeSpan> ValueChanged { get; set; }
    [Parameter] public string? Id { get; set; }
    [Parameter] public string? Class { get; set; }
    /// <summary>
    /// The step, in seconds, for the time input. Use 60 for minute resolution, 1 for seconds.
    /// </summary>
    [Parameter] public int Step { get; set; } = 60;

    private string ValueString => Step >= 60
        ? Value.ToString(@"hh\:mm")
        : Value.ToString(@"hh\:mm\:ss");

    private async Task OnChange(ChangeEventArgs e)
    {
        var s = e.Value?.ToString();
        // Accept both "HH:mm" and "HH:mm:ss"
        if (!string.IsNullOrWhiteSpace(s) && TimeSpan.TryParse(s, out var ts))
        {
            Value = ts;
            await ValueChanged.InvokeAsync(ts);
        }
    }
}